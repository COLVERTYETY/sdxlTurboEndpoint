<!DOCTYPE html>
<html>
<head>
    <title>Canvas Project</title>
    <link rel="stylesheet" type="text/css" href="static/style.css">
    <script src="https://docs.opencv.org/master/opencv.js" type="text/javascript"></script>
</head>
<body>
    <div class="inputs-section">
        <div class="input-group">
            <label for="promptInput">Prompt:</label>
            <input type="text" id="promptInput" class="long-input" value="a painting of a cat with a Mexican sombrero fighting aliens in space.">
        </div>

        <div class="input-group small-inputs">
            <label for="strengthInput">strength:</label>
            <input type="number" id="strengthInput" step="0.001" value="0.93">

            <label for="iterationsInput">iterations:</label>
            <input type="number" id="iterationsInput" step="1" value="2">

            <label for="noiseInput">noise:</label>
            <input type="number" id="noiseInput" step="0.1" value="0">

            <label for="kInput">K:</label>
            <input type="number" id="kInput" step="1" value="0">

            <label for="seedInput">seed:</label>
            <input type="number" id="seedInput" step="1" value="42">

            <label for="debugInput">debug:</label>
            <input type="checkbox" id="debugInput" checked>
        </div>
    </div>


    <div class="canvas-section">
        <div class="canvas-container">
            <canvas id="whiteCanvas"></canvas>
        </div>
        <div class="canvas-container">
            <canvas id="grayCanvas"></canvas>
        </div>
    </div>

    <div class="menu" id="menu">
        <button onclick="toggleMenu()">Calibrate</button>
        <div class="menu-content" id="menuContent">
            <canvas id="menuCanvas1"></canvas>
            <!-- <canvas id="menuCanvas2"></canvas> -->
            <canvas id="overlay"></canvas>
        </div>
    </div>

    <div class="explanation">
        <button onclick="toggleExplanation()">?</button>
        <div class="explanation-content" id="explanationContent">
            <section>
                <h1> Calibration </h1>
                <p> <b>1.</b> click the calibrate button </p>
                <p> <b>2.</b> move the red rectangle around until the cropped section is centered on the drawing</p>
                <p> <b>3.</b> enjoy</p>
                <h1> Parameters Explanation</h1>
                <p> <b>prompt</b> - text description of what you are trying to draw, elements in the prompt but not in the picture will be affected.</p>
                <p> <b>strength</b> - ratio of strength between the prompt and the image, 0.93 is a good value. </p>
                <p> <b>iterations</b> - the number of diffuser iterations, 2 should be enough</p>
                <p> <b>! warning !</b> - strength * iterations must be greater than 1 </p>
                <p> <b>noise</b> - applies a noise as part of the preprocessing, increases texture richness and creativity. is applied after the K digitization.</p>
                <p> <b>K</b> - digitizes the image colors in 3*K buckets. Preprocessing that helps with removing unwanted camera noise. 3 is a good value.</p>
                <p> <b>seed</b> - seed for reproducibility, -1 is random seed.</p>
                <p> <b>debug</b> - whether to save the input and output images for inference. Available at IP:8080/static/input.png and IP:8080/static/output.png</p>
            </section>
        </div>  
    </div>

    <script src="static/script.js"></script>
</body>
</html>
